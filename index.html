<!DOCTYPE html>
<html lang="en">
    <head>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1" />
      <title>Goalie Save Percentage Dashboard</title>
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" />
    <style>
      :root {
        color-scheme: light dark;
        --bg: #0f172a;
        --bg-panel: rgba(15, 23, 42, 0.75);
        --bg-light: #f8fafc;
        --border: rgba(148, 163, 184, 0.35);
        --text: #0f172a;
        --text-muted: #475569;
        --accent: #2563eb;
        font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      }

      body {
        margin: 0;
        padding: 0;
        background: linear-gradient(160deg, #020617, #0f172a 55%, #1e293b);
        color: white;
        min-height: 100vh;
      }

      .page {
        max-width: 1200px;
        margin: 0 auto;
        padding: 2.5rem 1.5rem 4rem;
        display: flex;
        flex-direction: column;
        gap: 2.5rem;
      }

      header {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      }

      header h1 {
        font-size: clamp(1.75rem, 4vw, 2.75rem);
        margin: 0;
        letter-spacing: -0.02em;
      }

      header p {
        margin: 0;
        color: rgba(226, 232, 240, 0.85);
        max-width: 60ch;
      }

      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 1rem;
      }

      .stat-card {
        background: rgba(15, 23, 42, 0.6);
        border: 1px solid var(--border);
        border-radius: 16px;
        padding: 1.25rem 1.4rem;
        backdrop-filter: blur(8px);
      }

      .stat-card h2 {
        font-size: 0.9rem;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        margin: 0 0 0.25rem;
        color: rgba(148, 163, 184, 0.85);
      }

      .stat-card span {
        font-size: 1.8rem;
        font-weight: 600;
      }

      .panel {
        background: rgba(15, 23, 42, 0.65);
        border: 1px solid var(--border);
        border-radius: 18px;
        padding: 1.5rem;
        box-shadow: 0 25px 45px rgba(15, 23, 42, 0.45);
        backdrop-filter: blur(12px);
      }

      .panel h2 {
        margin-top: 0;
        font-size: 1.3rem;
        margin-bottom: 1rem;
      }

      .controls {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
        margin-bottom: 1rem;
      }

      .controls label {
        font-size: 0.9rem;
        display: flex;
        flex-direction: column;
        gap: 0.35rem;
        color: rgba(226, 232, 240, 0.9);
      }

      .controls select,
      .controls input {
        min-width: 240px;
        padding: 0.6rem 0.75rem;
        border-radius: 12px;
        border: 1px solid rgba(148, 163, 184, 0.35);
        background-color: rgba(15, 23, 42, 0.7);
        color: white;
        font-size: 0.95rem;
      }

      .controls button {
        align-self: flex-end;
        padding: 0.6rem 1.1rem;
        border-radius: 12px;
        border: none;
        background: linear-gradient(120deg, rgba(59, 130, 246, 0.9), rgba(99, 102, 241, 0.85));
        color: white;
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.15s ease, box-shadow 0.15s ease;
      }

      .controls button:hover {
        transform: translateY(-1px);
        box-shadow: 0 15px 30px rgba(59, 130, 246, 0.35);
      }

      #savepct-chart {
        width: 100%;
        min-height: 480px;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 1rem;
        font-size: 0.95rem;
      }

      thead {
        text-transform: uppercase;
        font-size: 0.75rem;
        letter-spacing: 0.08em;
        color: rgba(148, 163, 184, 0.8);
      }

      th, td {
        padding: 0.65rem 0.5rem;
        text-align: left;
        border-bottom: 1px solid rgba(148, 163, 184, 0.2);
      }

      tbody tr:hover {
        background-color: rgba(148, 163, 184, 0.12);
      }

      th.sortable {
        cursor: pointer;
      }

      th.sortable::after {
        content: '\25B4\25BE';
        margin-left: 0.35rem;
        font-size: 0.75rem;
        opacity: 0.45;
      }

      .empty-state {
        margin: 1.5rem 0 0;
        color: rgba(226, 232, 240, 0.7);
      }

      @media (max-width: 768px) {
        .controls label {
          width: 100%;
        }
        .controls button {
          width: 100%;
        }
      }
    </style>
  </head>
  <body>
    <div class="page">
      <header>
        <h1>Goalie Save Percentage Dashboard</h1>
        <p>Explore how every goalie performs throughout the season. Filter by team, search for a specific goalie, and inspect a sortable table with the latest cumulative numbers.</p>
      </header>

      <section class="stats-grid">
        <article class="stat-card">
          <h2>Teams tracked</h2>
          <span>14</span>
        </article>
        <article class="stat-card">
          <h2>Goalies tracked</h2>
          <span>27</span>
        </article>
        <article class="stat-card">
          <h2>Match coverage</h2>
          <span>2000-01-01 → 2000-03-17</span>
        </article>
        <article class="stat-card">
          <h2>Zero-shot goalies</h2>
          <span>8</span>
        </article>
      </section>

      <section class="panel">
        <h2>Filter goalies</h2>
        <div class="controls">
          <label>
            Team filter
            <select id="team-filter">
              <option value="ALL">All teams</option>
              <option value="AIK IBF">AIK IBF</option><option value="FBC Kalmarsund">FBC Kalmarsund</option><option value="Hovslätts IK">Hovslätts IK</option><option value="IBF Falun">IBF Falun</option><option value="Jönköpings IK">Jönköpings IK</option><option value="Linköping IBK">Linköping IBK</option><option value="Mullsjö AIS">Mullsjö AIS</option><option value="Nykvarns IBF">Nykvarns IBF</option><option value="Pixbo IBK">Pixbo IBK</option><option value="Storvreta IBK">Storvreta IBK</option><option value="Strängnäs IBK">Strängnäs IBK</option><option value="Visby IBK">Visby IBK</option><option value="Växjö IBK">Växjö IBK</option><option value="Warberg IC">Warberg IC</option>
            </select>
          </label>
          <label>
            Highlight goalie
            <input id="goalie-search" type="search" placeholder="Search goalie name…" />
          </label>
          <button id="reset-view" type="button">Reset filters</button>
        </div>
      </section>
      <section class="panel">
        <h2>Sortable goalie table</h2>
        <table>
          <thead>
            <tr>
              <th class="sortable" data-key="team">Team</th>
              <th class="sortable" data-key="goalie">Goalie</th>
              <th class="sortable" data-key="games_played">Games</th>
              <th class="sortable" data-key="total_shots">Shots</th>
              <th class="sortable" data-key="total_saves">Saves</th>
              <th class="sortable" data-key="goals_against">Goals Against</th>
              <th class="sortable" data-key="avg_shots_per_game">Avg Shots/Game</th>
              <th class="sortable" data-key="final_save_pct">Cumulative Save%</th>
            </tr>
          </thead>
          <tbody id="summary-table-body"></tbody>
        </table>
        <p class="empty-state" id="table-empty" hidden>No goalies match the current filters.</p>
      </section>
    </div>

    <script>
      const summaryData = [{"team": "AIK IBF", "goalie": "Andreas Beckius (35 år)", "games_played": 2, "total_shots": 43, "total_saves": 31, "goals_against": 12, "final_save_pct": 0.7209302325581395, "avg_shots_per_game": 21.5, "save_pct_display": "72.1%"}, {"team": "AIK IBF", "goalie": "Jonathan Hjelm (27 år)", "games_played": 9, "total_shots": 250, "total_saves": 194, "goals_against": 56, "final_save_pct": 0.776, "avg_shots_per_game": 27.77777777777778, "save_pct_display": "77.6%"}, {"team": "FBC Kalmarsund", "goalie": "Axel Adebrink (20 år)", "games_played": 11, "total_shots": 1, "total_saves": 1, "goals_against": 0, "final_save_pct": 1.0, "avg_shots_per_game": 0.09090909090909091, "save_pct_display": "100.0%"}, {"team": "FBC Kalmarsund", "goalie": "Pontus Zarins (27 år)", "games_played": 11, "total_shots": 209, "total_saves": 166, "goals_against": 43, "final_save_pct": 0.7942583732057417, "avg_shots_per_game": 19.0, "save_pct_display": "79.4%"}, {"team": "Hovslätts IK", "goalie": "David Andersson (23 år)", "games_played": 7, "total_shots": 33, "total_saves": 13, "goals_against": 20, "final_save_pct": 0.3939393939393939, "avg_shots_per_game": 4.714285714285714, "save_pct_display": "39.4%"}, {"team": "Hovslätts IK", "goalie": "Gustav Ringhagen (22 år)", "games_played": 7, "total_shots": 179, "total_saves": 126, "goals_against": 53, "final_save_pct": 0.7039106145251397, "avg_shots_per_game": 25.571428571428573, "save_pct_display": "70.4%"}, {"team": "Hovslätts IK", "goalie": "Philip Axelsson (24 år)", "games_played": 8, "total_shots": 72, "total_saves": 51, "goals_against": 21, "final_save_pct": 0.7083333333333334, "avg_shots_per_game": 9.0, "save_pct_display": "70.8%"}, {"team": "IBF Falun", "goalie": "Carl Bending-Sörling (31 år)", "games_played": 11, "total_shots": 191, "total_saves": 147, "goals_against": 44, "final_save_pct": 0.7696335078534031, "avg_shots_per_game": 17.363636363636363, "save_pct_display": "77.0%"}, {"team": "IBF Falun", "goalie": "Victor Frejd (25 år)", "games_played": 11, "total_shots": 57, "total_saves": 44, "goals_against": 13, "final_save_pct": 0.7719298245614035, "avg_shots_per_game": 5.181818181818182, "save_pct_display": "77.2%"}, {"team": "Jönköpings IK", "goalie": "Alessio Mura (21 år)", "games_played": 10, "total_shots": 6, "total_saves": 5, "goals_against": 1, "final_save_pct": 0.8333333333333334, "avg_shots_per_game": 0.6, "save_pct_display": "83.3%"}, {"team": "Jönköpings IK", "goalie": "Emil Ödman (23 år)", "games_played": 11, "total_shots": 205, "total_saves": 148, "goals_against": 57, "final_save_pct": 0.7219512195121951, "avg_shots_per_game": 18.636363636363637, "save_pct_display": "72.2%"}, {"team": "Linköping IBK", "goalie": "Tomas Jurco (21 år)", "games_played": 11, "total_shots": 231, "total_saves": 179, "goals_against": 52, "final_save_pct": 0.7748917748917749, "avg_shots_per_game": 21.0, "save_pct_display": "77.5%"}, {"team": "Mullsjö AIS", "goalie": "Gustav Jansson (34 år)", "games_played": 11, "total_shots": 166, "total_saves": 131, "goals_against": 35, "final_save_pct": 0.7891566265060241, "avg_shots_per_game": 15.090909090909092, "save_pct_display": "78.9%"}, {"team": "Mullsjö AIS", "goalie": "Samuel Jönsson Dolke (20 år)", "games_played": 11, "total_shots": 72, "total_saves": 54, "goals_against": 18, "final_save_pct": 0.75, "avg_shots_per_game": 6.545454545454546, "save_pct_display": "75.0%"}, {"team": "Nykvarns IBF", "goalie": "Jesper Ahrén (23 år)", "games_played": 11, "total_shots": 27, "total_saves": 17, "goals_against": 10, "final_save_pct": 0.6296296296296297, "avg_shots_per_game": 2.4545454545454546, "save_pct_display": "63.0%"}, {"team": "Nykvarns IBF", "goalie": "Lucas Orrmo (37 år)", "games_played": 11, "total_shots": 260, "total_saves": 204, "goals_against": 56, "final_save_pct": 0.7846153846153846, "avg_shots_per_game": 23.636363636363637, "save_pct_display": "78.5%"}, {"team": "Pixbo IBK", "goalie": "Jon Hedlund (34 år)", "games_played": 11, "total_shots": 196, "total_saves": 171, "goals_against": 25, "final_save_pct": 0.8724489795918368, "avg_shots_per_game": 17.818181818181817, "save_pct_display": "87.2%"}, {"team": "Pixbo IBK", "goalie": "Liam Juhlin (19 år)", "games_played": 10, "total_shots": 41, "total_saves": 27, "goals_against": 14, "final_save_pct": 0.6585365853658537, "avg_shots_per_game": 4.1, "save_pct_display": "65.9%"}, {"team": "Storvreta IBK", "goalie": "Emil Lindblom (23 år)", "games_played": 11, "total_shots": 10, "total_saves": 5, "goals_against": 5, "final_save_pct": 0.5, "avg_shots_per_game": 0.9090909090909091, "save_pct_display": "50.0%"}, {"team": "Storvreta IBK", "goalie": "Måns Parsjö (31 år)", "games_played": 11, "total_shots": 147, "total_saves": 116, "goals_against": 31, "final_save_pct": 0.7891156462585034, "avg_shots_per_game": 13.363636363636363, "save_pct_display": "78.9%"}, {"team": "Strängnäs IBK", "goalie": "Oskar-Viking Tjärnberg (28 år)", "games_played": 11, "total_shots": 206, "total_saves": 152, "goals_against": 54, "final_save_pct": 0.7378640776699029, "avg_shots_per_game": 18.727272727272727, "save_pct_display": "73.8%"}, {"team": "Strängnäs IBK", "goalie": "Wiktor Åkerstedt (30 år)", "games_played": 10, "total_shots": 94, "total_saves": 76, "goals_against": 18, "final_save_pct": 0.8085106382978723, "avg_shots_per_game": 9.4, "save_pct_display": "80.9%"}, {"team": "Visby IBK", "goalie": "Andreas Egegård (28 år)", "games_played": 11, "total_shots": 17, "total_saves": 9, "goals_against": 8, "final_save_pct": 0.5294117647058824, "avg_shots_per_game": 1.5454545454545454, "save_pct_display": "52.9%"}, {"team": "Visby IBK", "goalie": "Rasmus Ekström (30 år)", "games_played": 11, "total_shots": 262, "total_saves": 208, "goals_against": 54, "final_save_pct": 0.7938931297709924, "avg_shots_per_game": 23.818181818181817, "save_pct_display": "79.4%"}, {"team": "Växjö IBK", "goalie": "Santtu Strandberg (34 år)", "games_played": 11, "total_shots": 197, "total_saves": 148, "goals_against": 49, "final_save_pct": 0.751269035532995, "avg_shots_per_game": 17.90909090909091, "save_pct_display": "75.1%"}, {"team": "Warberg IC", "goalie": "Nicholay Halvorsen (25 år)", "games_played": 11, "total_shots": 30, "total_saves": 24, "goals_against": 6, "final_save_pct": 0.8, "avg_shots_per_game": 2.727272727272727, "save_pct_display": "80.0%"}, {"team": "Warberg IC", "goalie": "Olle Jonsson (25 år)", "games_played": 11, "total_shots": 223, "total_saves": 170, "goals_against": 53, "final_save_pct": 0.7623318385650224, "avg_shots_per_game": 20.272727272727273, "save_pct_display": "76.2%"}];

      function renderTable(rows) {
        const tbody = document.getElementById('summary-table-body');
        tbody.innerHTML = '';
        if (!rows.length) {
          document.getElementById('table-empty').hidden = false;
          return;
        }
        document.getElementById('table-empty').hidden = true;
        const fragment = document.createDocumentFragment();
        rows.forEach((row) => {
          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td>${row.team || 'Unknown'}</td>
            <td>${row.goalie}</td>
            <td>${row.games_played}</td>
            <td>${row.total_shots}</td>
            <td>${row.total_saves}</td>
            <td>${row.goals_against}</td>
            <td>${(row.avg_shots_per_game || 0).toFixed(1)}</td>
            <td>${row.save_pct_display || '–'}</td>`;
          fragment.appendChild(tr);
        });
        tbody.appendChild(fragment);
      }

      function currentFilters() {
        return {
          team: document.getElementById('team-filter').value,
          search: document.getElementById('goalie-search').value.trim().toLowerCase(),
        };
      }

      function applyFilters(data) {
        const { team, search } = currentFilters();
        return data.filter((row) => {
          const matchesTeam = team === 'ALL' || (row.team || 'Unknown') === team;
          const matchesSearch = !search || row.goalie.toLowerCase().includes(search);
          return matchesTeam && matchesSearch;
        });
      }

      function sortBy(key, ascending) {
        return (a, b) => {
          const av = a[key] ?? (typeof a[key] === 'number' ? 0 : '');
          const bv = b[key] ?? (typeof b[key] === 'number' ? 0 : '');
          if (typeof av === 'number' && typeof bv === 'number') {
            return ascending ? av - bv : bv - av;
          }
          return ascending ? String(av).localeCompare(String(bv)) : String(bv).localeCompare(String(av));
        };
      }

      window.addEventListener('DOMContentLoaded', () => {
        let sortState = { key: 'team', ascending: true };
        renderTable(summaryData.sort(sortBy(sortState.key, sortState.ascending)));

        document.getElementById('team-filter').addEventListener('change', () => {
          const filtered = applyFilters(summaryData).sort(sortBy(sortState.key, sortState.ascending));
          renderTable(filtered);
        });

        document.getElementById('goalie-search').addEventListener('input', () => {
          const filtered = applyFilters(summaryData).sort(sortBy(sortState.key, sortState.ascending));
          renderTable(filtered);
        });

        document.getElementById('reset-view').addEventListener('click', () => {
          sortState = { key: 'team', ascending: true };
          document.getElementById('team-filter').value = 'ALL';
          document.getElementById('goalie-search').value = '';
          renderTable(summaryData.sort(sortBy(sortState.key, sortState.ascending)));
        });

        document.querySelectorAll('th.sortable').forEach((th) => {
          th.addEventListener('click', () => {
            const key = th.dataset.key;
            if (sortState.key === key) {
              sortState.ascending = !sortState.ascending;
            } else {
              sortState = { key, ascending: true };
            }
            const filtered = applyFilters(summaryData).sort(sortBy(sortState.key, sortState.ascending));
            renderTable(filtered);
          });
        });
      });
    </script>
  </body>
</html>